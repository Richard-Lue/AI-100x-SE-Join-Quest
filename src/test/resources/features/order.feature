# language: zh-TW
功能: 訂單處理與優惠計算
  作為一個電商系統
  我想要正確處理客戶訂單並計算各種優惠
  以便提供準確的訂單金額

  場景: 建立基本訂單
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
      | P002   | 商品B   | 200 |
    當 客戶 "張三" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 2  |
      | P002   | 1  |
    那麼 訂單總金額應為 400 元
    而且 訂單狀態應為 "已建立"

  場景: 滿額折扣優惠
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
      | P002   | 商品B   | 200 |
    而且 系統有滿額折扣優惠: 滿 500 元折 50 元
    當 客戶 "李四" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 3  |
      | P002   | 1  |
    那麼 訂單原始金額應為 500 元
    而且 訂單折扣金額應為 50 元
    而且 訂單總金額應為 450 元

  場景: 商品折扣優惠
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
      | P002   | 商品B   | 200 |
    而且 商品 "P001" 有 9 折優惠
    當 客戶 "王五" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 2  |
      | P002   | 1  |
    那麼 訂單原始金額應為 400 元
    而且 訂單折扣金額應為 20 元
    而且 訂單總金額應為 380 元

  場景: 買二送一優惠
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
    而且 商品 "P001" 有買二送一優惠
    當 客戶 "趙六" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 3  |
    那麼 訂單原始金額應為 300 元
    而且 訂單折扣金額應為 100 元
    而且 訂單總金額應為 200 元

  場景: 組合優惠
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
      | P002   | 商品B   | 200 |
    而且 商品組合 "P001" 和 "P002" 有優惠價 250 元
    當 客戶 "錢七" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 1  |
      | P002   | 1  |
    那麼 訂單原始金額應為 300 元
    而且 訂單折扣金額應為 50 元
    而且 訂單總金額應為 250 元

  場景: 會員等級折扣
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
      | P002   | 商品B   | 200 |
    而且 客戶 "孫八" 是 "VIP" 會員，享有 95 折優惠
    當 客戶 "孫八" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 2  |
      | P002   | 1  |
    那麼 訂單原始金額應為 400 元
    而且 訂單折扣金額應為 20 元
    而且 訂單總金額應為 380 元

  場景: 多重優惠疊加
    假設 系統中有以下商品:
      | 商品編號 | 商品名稱 | 單價 |
      | P001   | 商品A   | 100 |
      | P002   | 商品B   | 200 |
    而且 商品 "P001" 有 9 折優惠
    而且 客戶 "周九" 是 "VIP" 會員，享有 95 折優惠
    當 客戶 "周九" 建立訂單，包含以下商品:
      | 商品編號 | 數量 |
      | P001   | 2  |
      | P002   | 1  |
    那麼 訂單原始金額應為 400 元
    而且 訂單折扣金額應為 39 元
    而且 訂單總金額應為 361 元
